{% extends "base.html" %}

{% block title %}Quiz{% endblock %}

{% block content %}
    <div class="card shadow-sm"></div>
        <div class="card-body">
            <!-- 問題番号の表示 -->
            <h5 class="card-title">問題 {{ quiz_id }}： {{ quiz.question }}</h5>

            {% if not answerd %}
                <!-- 回答がなければフォームを表示 -->
                <form method="POST" class="mt-3">
                        {% for choice in [quiz.choice1, quiz.choice2, quiz.choice3, quiz.choice4] %}
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="radio" name="choice" value="{{ choice }}" id="choice{{ loop.index }}" required>
                                <label class="form-check-label" for="choice{{ loop.index }}">
                                    {{ choice }}
                                </label>
                            </div>
                        {% endfor %}
                        <button type="submit" class="btn btn-success mt-3">回答する</button>
                </form>
            {% else %}
                <!-- 回答済み：結果を表示して、ユーザーが次へ進む -->
                <p class="mt-3"><strong>{{ result }}</strong></p>
                
                {% if next_id %}
                    <a href="{{ url_for('quiz', question_id=next_id) }}" class="btn btn-primary mt-2">次の問題へ</a>
                {% else %}
                    <p class="mt-3">全問終了です。お疲れさまでした！</p>
                    <a href="{{ url_for('index') }}" class="btn btn-secondary mt-2">トップページに戻る</a>
                {% endif %}

            {% endif %}
        </div>
    </div>
{% endblock  %}