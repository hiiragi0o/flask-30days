<!DOCTYPE html>

<html lang="ja">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Word Counter</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    </head>

    <body>

        <div class="container mt-4">
            <h1>文字数カウントアプリ</h1>

            <form method="POST" action="/">
                <div class="mb-3">
                    <label for="text_to_count" class="form-label">文字を入力してください</label><br>
                    <textarea name="text" rows="5" cols="40" id="text_to_count" class="form-control">{{ text }}</textarea><br>
                </div>
                <button type="submit" class="btn btn-primary">カウントする</button>
            </form>

            <div class="mt-3">
                {% if error %}
                    <p class="text-danger">{{ error }}</p>
                {% endif %}

                {% if count is not none %}
                    文字数： <span class="fw-bold">{{ count }}</span>
                {% endif %}
            </div>

            <p>現在の文字数（リアルタイム）： <span id="charCount">0</span></p>
        </div>

        <script>
            const textarea = document.getElementById("text_to_count");
            const charCount = document.getElementById("charCount");

            textarea.addEventListener("input", () => {
                charCount.textContent = textarea.value.length;
            });
        </script>

    </body>
</html>